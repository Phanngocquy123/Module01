<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="./game.css" />
  </head>
  <body>
    <div class="container"></div>
    <div class="btnControl">
      <button onclick="resetListDog()">Reset</button>
      <button onclick="resultBlock()">Hiển thị kết quả</button>
      <button onclick="resultNone()">Tắt kết quả</button>
    </div>
    <script>
      let imgList = [
        {
          name: "dog4",
          img: "./fileanh/cho4.jpg",
          idOpenBlock: 1,
          idCompare: 4,
        },
        {
          name: "dog1",
          img: "./fileanh/cho1.jpg",
          idOpenBlock: 2,
          idCompare: 1,
        },
        {
          name: "dog5",
          img: "./fileanh/cho5.jpg",
          idOpenBlock: 3,
          idCompare: 5,
        },
        {
          name: "dog2",
          img: "./fileanh/cho2.jpg",
          idOpenBlock: 4,
          idCompare: 2,
        },
        {
          name: "dog3",
          img: "./fileanh/cho3.jpg",
          idOpenBlock: 5,
          idCompare: 3,
        },
        {
          name: "dog1",
          img: "./fileanh/cho1.jpg",
          idOpenBlock: 6,
          idCompare: 1,
        },
        {
          name: "dog4",
          img: "./fileanh/cho4.jpg",
          idOpenBlock: 7,
          idCompare: 4,
        },
        {
          name: "dog5",
          img: "./fileanh/cho5.jpg",
          idOpenBlock: 8,
          idCompare: 5,
        },
        {
          name: "dog6",
          img: "./fileanh/cho6.jpg",
          idOpenBlock: 9,
          idCompare: 6,
        },
        {
          name: "dog2",
          img: "./fileanh/cho2.jpg",
          idOpenBlock: 10,
          idCompare: 2,
        },
        {
          name: "dog3",
          img: "./fileanh/cho3.jpg",
          idOpenBlock: 11,
          idCompare: 3,
        },
        {
          name: "dog6",
          img: "./fileanh/cho6.jpg",
          idOpenBlock: 12,
          idCompare: 6,
        },
      ];

      function showImg() {
        let imgText = "";
        for (let i = 0; i < imgList.length; i++) {
          imgText += `
            <div class="container__img" onclick="choiceImg(${imgList[i].idOpenBlock},${imgList[i].idCompare})">
              <div class="container__img-dog" >
                     <img class="imgDog" src="${imgList[i].img}" alt="" />
              </div>
              <div class="container__img-cover">
                    <img class="imgCover" src="./fileanh/chamhoi.png" alt="" />
              </div>
            </div>
            `;
        }
        document.getElementsByClassName("container")[0].innerHTML = imgText;
      }
      showImg();

      let count = 0;
      let arrTemporality = [];

      function choiceImg(block, compareImg) {
        let addImgBlock = document.getElementsByClassName("imgDog");

        for (let j = 0; j < addImgBlock.length; j++) {
          if (imgList[j].idOpenBlock == block) {
            addImgBlock[j].classList.add("imgBlock");
          }
        }
        let imgIdOpenBlock = compareImg;
        arrTemporality.push(imgIdOpenBlock);
        console.log(arrTemporality);
        for (let i = 0; i < arrTemporality.length; i++) {
          if (arrTemporality[i] == arrTemporality[i + 1]) {
            arrTemporality.splice(i, 2);
            count++;
            console.log("okkk");
          } else if (i > 1) {
            for (let a = 0; a < addImgBlock.length; a++) {
              addImgBlock[a].classList.remove("imgBlock");
              arrTemporality.splice(0);
              count = 0;
            }
          }
          if (arrTemporality.length > 2) {
            for (let j = 0; j < addImgBlock.length; j++) {
              addImgBlock[j].classList.remove("imgBlock");
              arrTemporality.splice(0);
              count = 0;
            }
          }
          if (count == 6) {
            setTimeout(myFunction, 100);
          }
        }
      }

      function myFunction() {
        alert("Bạn đã thắng");
        count = 0;
        arrTemporality = [];
        nextGame();
      }

      function nextGame() {
        confirm("Bạn có muốn chơi tiếp");
        if (confirm) {
          resetListDog();
        }
      }
      function resetListDog() {
        imgList.sort(function () {
          return 0.5 - Math.random();
        });
        showImg();
      }

      function resultBlock() {
        let resultB = document.getElementsByClassName("imgDog");
        for (let j = 0; j < resultB.length; j++) {
          resultB[j].classList.add("imgBlock");
        }
      }
      function resultNone() {
        let resultN = document.getElementsByClassName("imgDog");
        for (let j = 0; j < resultN.length; j++) {
          resultN[j].classList.remove("imgBlock");
        }
      }
    </script>
  </body>
</html>
